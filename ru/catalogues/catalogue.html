<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="/stylesheets/catalogue.css">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script>window.jQuery || document.write('<script src="/javascripts/jquery-1.9.1.min.js"><\/script>')</script><script src="/javascripts/jquery.lazyload.min.js"></script>
</head>
<body>

<div id="bodyContent">

<table width="100%" border="1" id="table">
<thead><tr>
<th>Изображение</th>
<th>Название</th>
<th>Номинал</th>
<th>Валюта</th>
<th>Мон. двор</th>
<th>Страна</th>
<th>Год</th>
<th>Серия</th>
<th>Тема</th>
<th>Тираж</th>
<th>Материал</th>
<th>Fin</th>
<th>Качество</th>
<th>1 №</th>
</tr></thead>
<tbody></tbody>
</table>
</div>

<script type="text/javascript">
function urlParam(name) {
  var results = new RegExp('[\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);
  return results[1] || 0;
}

var col_name = urlParam("catalogue");
var url = "https://cdn.rawgit.com/OpenNumismat/catalogues/master/" + col_name + "/" + col_name + ".json";

function setData(arr) {
  var i;
  for (i = 0; i < arr.length; i++) {
    row = '<tr>';
    obverse_url = "https://raw.githubusercontent.com/OpenNumismat/catalogues/master/" + col_name + "/" + col_name + "_images/"+arr[i]["obverseimg"];
    reverse_url = "https://raw.githubusercontent.com/OpenNumismat/catalogues/master/" + col_name + "/" + col_name + "_images/"+arr[i]["reverseimg"];
    row += '<td class="img">tx_ltsymbola href="'+obverse_url+'"tx_gtsymboltx_ltsymbolimg height="49px" src="/images/loader.gif" data-original="'+obverse_url+'"tx_gtsymboltx_ltsymbol/atx_gtsymbol';
    row +=     'tx_ltsymbola href="'+reverse_url+'"tx_gtsymboltx_ltsymbolimg height="49px" src="/images/loader.gif" data-original="'+reverse_url+'"tx_gtsymboltx_ltsymbol/atx_gtsymbol</td>';
    row += '<td>'+ (arr[i]["title"] == undefined ? '' : arr[i]["title"]) +'</td>'
    row += '<td>'+ (arr[i]["value"] == undefined ? '' : arr[i]["value"]) +'</td>'
    row += '<td>'+ (arr[i]["unit"] == undefined ? '' : arr[i]["unit"]) +'</td>'
    row += '<td>'+ (arr[i]["mintmark"] == undefined ? '' : arr[i]["mintmark"]) +'</td>'
    row += '<td>'+ (arr[i]["country"] == undefined ? '' : arr[i]["country"]) +'</td>'
    row += '<td>'+ (arr[i]["year"] == undefined ? '' : arr[i]["year"]) +'</td>'
    row += '<td>'+ (arr[i]["series"] == undefined ? '' : arr[i]["series"]) +'</td>'
    row += '<td>'+ (arr[i]["subjectshort"] == undefined ? '' : arr[i]["subjectshort"]) +'</td>'
    row += '<td>'+ (arr[i]["mintage"] == undefined ? '' : arr[i]["mintage"]) +'</td>'
    row += '<td>'+ (arr[i]["material"] == undefined ? '' : arr[i]["material"]) +'</td>'
    row += '<td>'+ (arr[i]["fineness"] == undefined ? '' : arr[i]["fineness"]) +'</td>'
    row += '<td>'+ (arr[i]["quality"] == undefined ? '' : arr[i]["quality"]) +'</td>'
    row += '<td>'+ (arr[i]["catalognum1"] == undefined ? '' : arr[i]["catalognum1"]) +'</td>'
    row += '</tr>'
    $('#table > tbody:last').append(row);
  }
}

$.getJSON( url, function( data ) {
  setData(data["coins"]);
  $("img").lazyload();
  document.title = data["description"]["title"];
});
</script>
</body>
</html>
